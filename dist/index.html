<html>

<head>
    <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"/>
    <title>SOTRABASUD</title>
    <link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css>
    <link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous>
    <link href=https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css rel=stylesheet>
    <link href=https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.theme.min.css rel=stylesheet>
</head>

<body>
    <div id=container_map></div>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
    <script src=https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script>
    <script src=https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js></script>
    <script>
        var app;
        var floors = {
                8: {
                    selectorId: "container_map",
                    size: [1366, 768],
                    sizePhone: [window.innerWidth, window.innerHeight],
                    fullSizeShow: true,
                    sprites: [
                        { "name": "background", "url": "./assets/pictures/etage3.jpg", "x": 0, "y": 0 },
                    ],
                    limitZoom: [1, 4],
                    properties: {
                        "floor": [
                            { "title": "Bien 1", "coords": [[-151.2399299913171, -7.537826352109632, true], [-242.18292398194097, 59.91156085760308, true], [-283.8651295609769, 23.534363261353526, true], [-443.0153690445687, 20.50293012833273, true], [-433.9210696455063, -36.33644111580719, true], [-392.23886406647034, -37.85215768231759, true], [-385.4181395171736, -78.77650497809833, true], [-348.2830836376688, -81.05007982786393, true], [-336.15735110558563, -163.6566327026806, true], [-233.84648286613378, -159.10948300314942, true], [-242.18292398194097, -86.35508781065032, true], [-149.7242134248067, -8.29568463536483, false]], "opacity": .5 },
                            //{"title": "Etage 5","coords": [[831.9999999999989,-130.99999999999906,true],[-144.00000000000088,-270.99999999999903,true],[-2064.0000000000005,17.000000000000906,true],[-2064.0000000000005,-382.99999999999903,true],[-276.00000000000085,-914.9999999999989,true],[835.9999999999989,-670.999999999999,true],[831.9999999999989,-134.99999999999906,false],[-276.00000000000085,-914.9999999999989,true],[-232.00000000000085,-286.99999999999903,true]], "opacity": .5},
                        ],
                    },
                    widthExtent: function (width) {
                        return -950;
                    },
                    heightExtent: function (height) {
                        return -415;
                    },
                    widthExtentMaximum: function (width) {
                        /*if(width< 400){
                            return 4500;
                        }*/
                        return 955;
                    },
                    heightExtentMaximum: function (height) {
                        /*if(height< 700){
                            return 3365;
                        }*/
                        return 415;
                    },
                    initialData: function (width, height) {
                        if (window.innerWidth < 1400) {
                            var k = .7;
                            var x = -250;
                            var y = 0;
                        } else {
                            var k = 1.0306872652270715;
                            var x = 796.3192389190732;
                            var y = 415.22786966239767;
                        }
                        var k = 1.0306872652270715;
                        var x = 820;
                        var y = 420;
                        return { "k": k, "x": x, "y": y };
                    },
                    initialDataMobile: function (width, height) {
                        var k = 1;
                        var x = 0;
                        var y = 0;
                        return { "k": k, "x": x, "y": y };
                    },
                    showGuide: true,
                    defaultColor: 0x2C6BA4,
                    defaultOpacity: .9,
                    showButtonPlans: true,
                    onMouseOverBackground: function (elemnt) {
                        // console.log('onMouseOverBackground');
                        $('.ui-tooltip').hide();
                    },
                    onMouseOutBackground: function (element) {
                        console.log('onMouseOutBackground');
                    },
                    onFinishDrawing(item) {
                        console.log(JSON.stringify(item));
                    },
                    onMouseOverPropertie(item) {
                        $("canvas[title]").tooltip("option", "content", item.title);
                        $('.ui-tooltip').show();
                    },
                    onClickPropertie(item) {

                    }
                }
            };
        $(document).ready(function () {
            var data = {
                selectorId: "container_map",
                size: [1366, 768],
                sizePhone: [window.innerWidth, window.innerHeight],
                fullSizeShow: true,
                sprites: [
                    { "name": "background", "url": "./assets/pictures/1.jpg", "x": 0, "y": 0 },
                ],
                limitZoom: [.1, 8],
                properties: {
                    "floors": [
                        { "title": "Etage 8", "coords": [[913.2192313225148, -710.492140551749, true], [919.3578085906345, -699.8144760991311, true], [900.6914603219327, -732.8395538052957, true], [878.4354296938651, -729.9678079178032, true], [876.2816202782457, -719.198760839706, true], [471.3654501417911, -592.8419417900323, true], [448.3914830418504, -627.3028924399432, true], [373.7260899670432, -609.3544806431146, true], [233.0105414799065, -564.8424193869795, true], [204.29308260498064, -589.2522594306665, true], [194.24197199875658, -582.0728947119351, true], [178.44736961754737, -597.8674970931443, true], [-257.34006880945253, -454.28020271851494, true], [-255.90419586570624, -426.9986167873354, true], [-316.9287959749237, -404.0246496873947, true], [-332.0054618842598, -414.07576029361877, true], [-467.69545506828445, -378.1789366999614, true], [-467.69545506828445, -320.7440189501097, true], [-624.2056059366304, -274.7960847502284, true], [-667.2817942490192, -298.48798832204216, true], [-667.2817942490192, -344.43592252192354, true], [-746.9727426269384, -393.2556026092975, true], [-748.4086155706847, -425.5627438435891, true], [-469.8492644839039, -525.3559134339564, true], [-470.567200955777, -542.586388758912, true], [-368.6202219497902, -582.0728947119351, true], [-367.18434900604393, -587.0984500150471, true], [-256.6221323375794, -632.3284477430552, true], [-255.1862593938331, -647.4051136523914, true], [11.886108142977383, -745.7624102990125, true], [23.373091692947728, -732.8395538052957, true], [204.29308260498064, -807.504946880103, true], [208.6007014362195, -783.8130433082891, true], [899.2555873781862, -1034.5134940469768, true], [916.4860627031417, -952.6687362534382, true], [920.9426971536438, -702.280730284636, true], [922.030885357764, -703.3689184887561, false]], "opacity": 0, info: { etage: 8 } },
                        { "title": "Etage 7", "coords": [[918.4714577827511, -699.2371616822174, true], [919.9073307264974, -519.7530437139308, true], [898.3692365703031, -532.6759002076475, true], [879.7106040122283, -535.4950939085456, true], [873.0793440337452, -526.0218653678556, true], [470.46713105442115, -419.9217057121279, true], [447.25772112973067, -437.9208399394389, true], [374.3138613664178, -419.44804428509343, true], [232.68909468310267, -378.239500133092, true], [205.21673191510172, -401.92257148481696, true], [196.69082622848074, -407.13284718219643, true], [178.21803057413527, -420.8690285661969, true], [-254.70851373539676, -299.61170324536516, true], [-256.1294980165003, -283.98087615322675, true], [-237.18304093512032, -268.35004906108827, true], [-318.65280638505413, -247.5089462715703, true], [-331.91532634202014, -257.92949766632927, true], [-467.3824944738868, -220.51024493060387, true], [-467.8561559009213, -201.0901264221894, true], [-554.0625356212001, -176.93339364342995, true], [-554.0625356212001, -214.82630780618987, true], [-551.6942284860277, -234.24642631460432, true], [-556.4308427563726, -238.98304058494932, true], [-621.7961196871335, -273.56032475846774, true], [-465.9615101927833, -319.50548318081417, true], [-464.5405259116798, -376.81851585198854, true], [-332.8626491960891, -411.39580002550696, true], [-317.23182210395066, -401.4489100577825, true], [-253.7611908813278, -426.5529656906109, true], [-255.18217516243126, -453.5516670315774, true], [177.27070772006627, -595.6500951419271, true], [192.90153481220474, -578.5982837686851, true], [203.79574763399822, -582.8612366119955, true], [205.69039334213622, -583.8085594660646, true], [234.11007896420617, -561.5464723954431, true], [375.2611842204868, -607.4916308177895, true], [446.7840597026962, -623.5961193369625, true], [471.41445390849015, -591.3871422986166, true], [875.9213125959523, -716.9074204627588, true], [883.4998954285043, -728.2752947115868, true], [899.6043839476772, -730.6436018467592, true], [919.0245024560917, -698.9082862354478, true]], "opacity": 0, info: { etage: 7 } },
                        { "title": "Etage 6", "coords": [[917.1793305894851, -518.7919510830062, true], [917.1793305894851, -327.9063959881031, true], [899.6538577892086, -338.32694738286204, true], [878.8127549996907, -337.8532859558276, true], [874.0761407293456, -335.0113173936206, true], [872.1814950212076, -332.1693488314136, true], [471.93758917705605, -248.33127624630725, true], [448.2545178253311, -258.75182764106626, true], [374.36333520794926, -243.12100054892778, true], [231.31758424353058, -210.43836208354736, true], [204.79254432959866, -230.3321420189963, true], [33.32710774311002, -188.64993643996038, true], [11.538682099523065, -201.91245639692636, true], [-255.60636274793436, -139.862809455407, true], [-257.02734702903786, -127.54761235251003, true], [-255.60636274793436, -125.17930521733753, true], [-255.60636274793436, -122.81099808216504, true], [-240.92285850986488, -113.81143096850955, true], [-239.02821280172688, -112.39044668740605, true], [-322.8662853868332, -101.96989529264708, true], [-329.49754536531617, -109.07481669816457, true], [-467.3330206323554, -78.76048536795663, true], [-470.1749891945624, -41.34123263223122, true], [-524.6460533035298, -29.026035529334244, true], [-693.7431827548459, -94.8649738871296, true], [-956.6252747589929, -34.70997265374823, true], [-956.6252747589929, -84.91808391940512, true], [-863.787635060231, -112.39044668740605, true], [-951.4149990616133, -152.65166798533846, true], [-958.0330410372721, -167.60251679885752, true], [-958.0330410372721, -206.35251679885752, true], [-948.0330410372721, -226.3525167988575, true], [-691.7830410372724, -310.72751679885744, true], [-554.9080410372725, -236.3525167988575, true], [-555.5330410372725, -176.35251679885752, true], [-468.0330410372726, -200.10251679885752, true], [-464.2830410372726, -219.4775167988575, true], [-333.0330410372727, -256.35251679885744, true], [-319.2830410372727, -245.10251679885747, true], [-233.6580410372728, -266.97751679885744, true], [-251.78304103727277, -284.47751679885744, true], [-252.40804103727277, -287.60251679885744, true], [-252.40804103727277, -295.72751679885744, true], [-252.40804103727277, -298.22751679885744, true], [178.21695896272684, -420.1025167988573, true], [208.8419589627268, -396.9775167988573, true], [232.5919589627268, -376.3525167988574, true], [446.3419589627266, -435.1025167988573, true], [470.7169589627266, -418.8525167988573, true], [873.8419589627263, -523.8525167988572, true], [880.0919589627263, -531.9775167988572, true], [883.2169589627263, -532.6025167988572, true], [896.9669589627262, -530.1025167988572, true], [901.3419589627262, -528.8525167988572, true], [908.8419589627262, -523.8525167988572, true], [915.7169589627262, -519.4775167988572, true]], "opacity": 0, info: { etage: 6 } },
                        { "title": "Etage 5", "coords": [[900.1194142816053, -337.8205476754059, true], [916.6819142816051, -327.1955476754059, true], [916.6819142816051, -141.88304767540617, true], [897.6194142816053, -155.32054767540615, true], [895.4319142816053, -156.88304767540615, true], [878.8694142816053, -153.44554767540615, true], [471.0569142816057, -71.88304767540626, true], [447.6194142816057, -81.88304767540625, true], [374.1819142816058, -68.44554767540627, true], [275.43191428160594, -45.6330476754063, true], [231.05691428160603, -36.57054767540631, true], [204.80691428160605, -49.070547675406296, true], [33.86941428160628, -19.695547675406335, true], [10.74441428160631, -34.38304767540632, true], [-256.7555857183933, 18.116952324593615, true], [-257.0680857183933, 21.241952324593612, true], [-257.06808571839326, 26.866952324593605, true], [-256.75558571839326, 33.1169523245936, true], [-255.50558571839326, 36.55445232459359, true], [-243.3180857183933, 42.49195232459358, true], [-318.6305857183932, 52.49195232459357, true], [-331.13058571839315, 45.92945232459358, true], [-468.005585718393, 72.80445232459354, true], [-469.70836869213065, 96.53521844070066, true], [-533.7708686921305, 112.47271844070063, true], [-694.0833686921302, 58.410218440700724, true], [-967.2083686921297, 118.09771844070062, true], [-966.2708686921297, 105.91021844070065, true], [-958.7708686921297, 103.41021844070065, true], [-958.1458686921297, 100.91021844070066, true], [-957.5208686921299, 73.0977184407007, true], [-951.8958686921299, 73.0977184407007, true], [-952.2083686921299, 53.41021844070074, true], [-862.20836869213, 31.847718440700774, true], [-861.58336869213, 15.2852184407008, true], [-954.0833686921299, -13.46478155929915, true], [-957.5208686921299, -32.83978155929912, true], [-694.7144275788017, -94.29619271477718, true], [-520.5311530810558, -26.446961038437415, true], [-468.12179063431626, -40.087754004027175, true], [-466.68591769056997, -50.497832846187784, true], [-468.12179063431626, -76.7025140695576, true], [-332.07282921435524, -109.72759177572227, true], [-318.0730680128289, -99.67648116949825, true], [-237.6641831630366, -111.52243295540515, true], [-253.4587855442458, -122.6504482694389, true], [-255.97156319580182, -128.39394004442406, true], [-255.25362672392868, -137.0091777069018, true], [9.305963161325419, -201.6234601754849, true], [35.69012850266351, -186.008341912244, true], [203.86674703894784, -228.72556198869614, true], [233.3324547725202, -209.2792180184138, true], [374.52487425711, -243.01305234613852, true], [447.97757803522035, -256.3433578466104, true], [472.18976557689376, -245.46147580540887, true], [873.1871187951701, -332.2444850839911, true], [876.7237304585607, -335.7810967473816, true], [883.5249067343116, -337.68542610459184, true], [894.4067887755132, -338.5015672576819, true], [897.9434004389036, -338.5015672576819, true], [899.5756827450839, -338.5015672576819, true], [901.2079650512641, -338.5015672576819, true]], "opacity": 0, info: { etage: 5 } },
                        { "title": "Etage 4", "coords": [[914.871048423611, -141.4344655760223, true], [899.558548423611, -154.24696557602226, true], [878.308548423611, -152.6844655760223, true], [876.746048423611, -150.4969655760223, true], [470.4960484236119, -71.43446557602245, true], [447.99604842361197, -80.49696557602243, true], [374.8710484236121, -67.05946557602246, true], [230.49604842361242, -35.184465576022525, true], [206.43354842361245, -47.684465576022504, true], [33.621048423612834, -18.621965576022564, true], [12.683548423612878, -32.99696557602253, true], [-257.31645157638656, 18.565534423977358, true], [-257.31645157638656, 21.37803442397735, true], [-257.62895157638656, 26.69053442397734, true], [-257.62895157638656, 32.315534423977326, true], [-256.69145157638656, 34.190534423977326, true], [-242.31645157638658, 42.003034423977304, true], [-317.31645157638644, 53.56553442397728, true], [-329.5039515763864, 47.6280344239773, true], [-468.5664515763861, 73.56553442397724, true], [-469.1914515763861, 96.0655344239772, true], [-534.5039515763859, 113.87803442397716, true], [-693.2539515763856, 58.565534423977255, true], [-967.316451576385, 118.87803442397713, true], [-967.316451576385, 252.31553442397686, true], [-691.0664515763856, 208.56553442397694, true], [-538.5664515763859, 242.00303442397689, true], [-536.0664515763859, 258.8780344239768, true], [-469.8164515763861, 253.56553442397683, true], [-468.8789515763861, 222.94053442397689, true], [-331.0664515763864, 205.7530344239769, true], [-320.4414515763864, 212.6280344239769, true], [-237.62895157638658, 202.00303442397694, true], [-256.06645157638656, 191.06553442397694, true], [-258.25395157638656, 182.31553442397697, true], [-257.62895157638656, 175.440534423977, true], [10.808548423612882, 135.12803442397708, true], [34.246048423612834, 147.94053442397706, true], [205.18354842361248, 121.69053442397714, true], [231.43354842361242, 132.9405344239771, true], [447.99604842361197, 93.5655344239772, true], [471.1210484236119, 100.7530344239772, true], [879.246048423611, 37.94053442397732, true], [889.246048423611, 36.06553442397732, true], [900.496048423611, 35.12803442397732, true], [915.496048423611, 42.003034423977304, true], [915.808548423611, -142.3719655760223, true], [914.871048423611, -142.6844655760223, false]], "opacity": 0, info: { etage: 4 } },
                        { "title": "Etage 3", "coords": [[917.5401373073502, 237.44771930080805, true], [901.0275984542678, 229.90938634614, true], [879.84847253401, 232.422163997696, true], [876.6177584105809, 232.78113223363258, true], [469.9067470944441, 281.60081232100646, true], [448.36865293824974, 276.57525701789444, true], [372.98532339156947, 284.8315264444356, true], [232.26977490443295, 303.4978747131374, true], [206.42406191699973, 297.39541470221565, true], [157.60438182962585, 302.77993824126423, true], [34.11930866744481, 312.83104884748826, true], [12.58121451125045, 303.85684294907395, true], [-255.60780212383776, 335.97870441813734, true], [-256.96803737898796, 335.4346103160773, true], [-257.240084430018, 339.78736313255786, true], [-255.60780212383779, 349.3090099186092, true], [-255.87984917486781, 353.1176686330297, true], [-238.7408849599754, 359.1027037556906, true], [-323.0754707792873, 365.3597859293815, true], [-328.7884588509181, 356.9263273474503, true], [-467.99674684278955, 369.51918161032114, true], [-469.24674684278955, 394.8316816103211, true], [-541.7467468427894, 400.769181610321, true], [-543.9342468427893, 381.7066816103211, true], [-692.0592468427891, 362.01918161032114, true], [-967.0592468427885, 394.8316816103211, true], [-967.9967468427885, 252.9566816103214, true], [-691.7535080918611, 208.9442183106257, true], [-538.4673031199682, 244.85338505364305, true], [-538.4673031199682, 256.221259302471, true], [-539.4146259740372, 261.90519642688497, true], [-468.36541191886243, 250.53732217805702, true], [-470.26005762700044, 224.01228226412513, true], [-330.05627522478886, 206.0131480368142, true], [-317.7410781218919, 214.53905372343516, true], [-235.32398981788918, 203.1711794746072, true], [-256.8620839740836, 189.07161374462572, true], [-257.58002044595673, 179.73843961027484, true], [-257.22105221002016, 176.5077254868457, true], [9.554692877235691, 136.10477005351828, true], [32.950739265818974, 149.16302850296012, true], [204.34038141474304, 121.9583233999563, true], [230.4568983136267, 133.3842995432179, true], [448.09453913765725, 95.29771239901255, true], [469.31420911800024, 102.91502982785363, true], [471.4905855262405, 104.00321803197377, true], [877.9288797651176, 37.62373758064446, true], [902.9572084598811, 34.90326707034407, true], [910.0304317866621, 40.34420809094484, true], [917.6477492155032, 44.69696090742545, true], [918.7359374196234, 235.67399073051226, false]], "opacity": 0, info: { etage: 3 } },
                        { "title": "Etage 2", "coords": [[917.8371387380308, 237.9374167954138, true], [897.8371387380308, 229.49991679541384, true], [878.774638738031, 231.99991679541384, true], [469.12526502712933, 281.0485981794141, true], [447.8105008105769, 276.3119839090691, true], [373.9193181931952, 283.4169053145866, true], [232.29455150988028, 303.78434667707, true], [205.2958501689139, 296.67942527155253, true], [34.77773643649458, 314.6785594988635, true], [11.094665084769677, 305.20533095817353, true], [-255.57671833565274, 335.9933237154159, true], [-258.41868689785974, 340.7299379857609, true], [-256.0503797626872, 349.7295050994163, true], [-253.6963724396399, 354.0117401672236, true], [-237.10150232680758, 357.5483518306141, true], [-246.62314911285893, 359.1806341367943, true], [-321.9801822481794, 366.2538574635753, true], [-329.86954672805047, 359.72472823885437, true], [-330.6856878811406, 358.09244593267414, true], [-467.79740160027967, 370.87865733108595, true], [-468.0694486513097, 395.9069860258494, true], [-543.4264817866301, 400.8038329443901, true], [-544.2426229397201, 382.5766805253776, true], [-690.6682882468023, 362.220794940116, true], [-967.3526032869927, 397.27022382002076, true], [-966.6577829599175, 516.1593908297839, true], [-694.559860119996, 502.87756610013076, true], [-554.5622481047329, 516.877327301657, true], [-553.8443116328598, 539.8512944015977, true], [-472.3585220752579, 533.3898661547394, true], [-468.050903244019, 515.8004225938473, true], [-331.28400535218515, 508.62105787511587, true], [-319.79702180221483, 515.4414543579107, true], [-244.7726604914713, 513.6466131782279, true], [-251.59305697426615, 510.7748672907353, true], [-255.18273933363187, 503.59550257200385, true], [-256.2596440414416, 498.5699472688919, true], [-259.1313899289342, 488.87780489860444, true], [185.07722321048138, 460.91689204092637, true], [191.70848318896435, 457.1276006246504, true], [200.7080503026198, 455.7066163435469, true], [208.28663313517177, 455.2329549165124, true], [232.44336591393113, 461.3905534679609, true], [896.9903480433311, 413.55074933747665, true], [912.147513708435, 422.55031645113206, true], [917.3577894058145, 427.76059214851153, true], [917.831450832849, 238.29602133471258, false]], "opacity": 0, info: { etage: 2 } },
                        { "title": "Etage 1", "coords": [[896.9364246918542, 413.540260657078, true], [916.523812366017, 429.86308371888026, true], [916.523812366017, 470.6701413733859, true], [557.4217050063673, 492.43390545578893, true], [556.8776109043072, 634.4424660934685, true], [449.9081253213665, 626.3392418746874, true], [231.7831253213675, 632.5892418746874, true], [206.7831253213676, 632.5892418746874, true], [194.28312532136766, 632.5892418746874, true], [177.40812532136772, 633.2142418746874, true], [-255.71687467863038, 651.9642418746873, true], [-256.7395158073907, 653.9098763483663, true], [-258.64384516460103, 658.806723266907, true], [-259.73203336872115, 668.3283700529583, true], [-259.73203336872115, 669.6886053081085, true], [-319.03829049326936, 669.4165582570785, true], [-332.09654894271114, 656.3582998076366, true], [-469.7523567639101, 663.9756172364778, true], [-470.0244038149402, 694.4448869518419, true], [-543.4771075930503, 693.3566987477218, true], [-544.2932487461404, 661.5271937772073, true], [-693.6470797616311, 665.607899542658, true], [-916.7256616062618, 671.5929346653188, true], [-915.6374734021417, 641.3957120009846, true], [-913.7331440449315, 617.7276185613714, true], [-875.1024627986661, 617.1835244593112, true], [-871.8378981863057, 555.1567968244627, true], [-964.8779896385785, 549.1717617018019, true], [-966.3241460937376, 515.1740504247718, true], [-693.9688255489017, 505.70082188408185, true], [-629.0772100451755, 510.43743615442685, true], [-555.186027427794, 517.5423575599443, true], [-553.7650431466905, 537.4361374953932, true], [-552.8177202926215, 540.2781060576001, true], [-468.97964770751554, 537.9097989224277, true], [-470.400631988619, 516.1213732788409, true], [-330.67051101344236, 510.43743615442696, true], [-317.4079910564764, 518.0160189869789, true], [-255.83200554199178, 512.3320818625649, true], [-257.2529898230953, 491.96464050008154, true], [178.9891844756766, 464.9659391591152, true], [193.67268871374603, 458.33467918063224, true], [213.56646864919492, 462.5976320239427, true], [231.5656028765058, 464.4922777320807, true], [375.08501526795845, 455.49271061842524, true], [449.923520739409, 452.6507420562183, true], [473.60659209113385, 448.8614506399423, true], [660.2291943427257, 437.4935763911144, true], [719.4368727220378, 428.96767070449346, true], [896.5862464329398, 414.75782789345857, true], [898.4808921410778, 414.7578278934585, false]], "opacity": 0, info: { etage: 2 } },
                        { "title": "Etage 0", "coords": [[554.5982382072639, 632.7348554101397, true], [555.5455610613328, 763.465409271661, true], [512.4423712011936, 751.150212168764, true], [466.4972127788474, 747.8345821795225, true], [416.76276294022523, 752.097535022833, true], [351.39748600946467, 781.9382049260063, true], [317.76752469001536, 786.6748191963513, true], [290.2951619220146, 789.9904491855928, true], [268.9803977054622, 798.5163548722137, true], [263.2964605810482, 805.6212762777312, true], [257.13886202959975, 821.7257647969041, true], [255.24421632146178, 827.8833633483525, true], [96.5676382649053, 824.5677333591111, true], [79.51582689166341, 813.6735205373177, true], [54.88543268586957, 806.5685991318003, true], [35.93897560448969, 800.8846620073863, true], [9.413935690557858, 798.5163548722138, true], [-24.216025628891426, 797.5690320181449, true], [-31.32094703440888, 795.2007248829724, true], [-51.21472696985776, 784.3065120611789, true], [-65.42456978089267, 776.2542678015924, true], [-164.41980803110252, 769.6230078231094, true], [-220.31185642117316, 798.0426934451792, true], [-240.67929778365655, 811.3052134021451, true], [-250.1525263243465, 826.9360404942836, true], [-839.8610029822953, 815.5681662454557, true], [-852.1762000851922, 802.7793077155243, true], [-873.9646257287791, 796.1480477370413, true], [-887.227145685745, 795.2007248829724, true], [-901.4369884967799, 791.8850948937309, true], [-907.1209256211939, 789.0431263315239, true], [-920.8571070051943, 775.3069449475234, true], [-933.6459655351257, 767.7283621149716, true], [-940.2772255136086, 762.0444249905576, true], [-955.4343911787125, 761.5707635635231, true], [-965.381281146437, 757.3078107202126, true], [-962.0656511571956, 740.2559993469707, true], [-865.9123814691926, 745.4662750443501, true], [-864.4913971880892, 677.2590295513826, true], [-918.0151384429873, 677.732690978417, true], [-918.0151384429873, 672.5224152810376, true], [-696.3415905908428, 663.9965095944167, true], [-690.1839920393943, 665.8911553025547, true], [-544.7699339398036, 661.1545410322097, true], [-542.4016268046312, 694.784502351659, true], [-471.82607417649115, 694.784502351659, true], [-469.4577670413187, 665.4174938755202, true], [-332.5696146283491, 657.8389110429682, true], [-321.6754018065556, 671.5750924269687, true], [-317.88611039027967, 671.1014309999341, true], [-256.31012487579505, 672.5224152810376, true], [-255.83646344876055, 655.4706039077957, true], [-250.15252632434658, 651.6813124915197, true], [179.93204942297666, 635.5768239723469, true], [194.14189223401158, 633.6821782642089, true], [215.45665645056394, 634.6295011182779, true], [235.3504363860128, 632.7348554101399, true], [308.76795757635983, 632.7348554101399, true], [446.6034328433985, 626.5772568586914, true], [553.6509153531948, 632.2611939831054, false]], "opacity": 0, info: { etage: 1 } },
                    ],
                },
                widthExtent: function (width) {
                    return -1500;
                },
                heightExtent: function (height) {
                    return -1074;
                },
                widthExtentMaximum: function (width) {
                    /*if(width< 400){
                        return 4500;
                    }*/
                    return 1500;
                },
                heightExtentMaximum: function (height) {
                    /*if(height< 700){
                        return 3365;
                    }*/
                    return 1074;
                },
                initialData: function (width, height) {
                    if (window.innerWidth < 1400) {
                        var k = 0.4;
                        var x = 840;
                        var y = 429;
                    } else {
                        var k = 0.4;
                        var x = 840;
                        var y = 429;
                    }

                    return { "k": k, "x": x, "y": y };
                },
                initialDataMobile: function (width, height) {
                    var k = .4;
                    var x = 0;
                    var y = 0;
                    return { "k": k, "x": x, "y": y };
                },
                showGuide: true,
                defaultColor: 0x2C6BA4,
                defaultOpacity: .9,
                showButtonPlans: true,
                onMouseOverBackground: function (elemnt) {
                    // console.log('onMouseOverBackground');
                    $('.ui-tooltip').hide();
                },
                onMouseOutBackground: function (element) {
                    console.log('onMouseOutBackground');
                },
                onFinishDrawing(item) {
                    console.log(JSON.stringify(item));
                },
                onMouseOverPropertie(item) {
                    $("canvas[title]").tooltip("option", "content", item.title);
                    $('.ui-tooltip').show();
                },
                onClickPropertie(item) {
                    loadFloor(item.info.etage);
                },
                search: function(Graphics, search, searchOptions){
                    /*var searchData = "data" in searchOptions ? searchOptions.data : [];
                    var searchDataFull = "data_full" in searchOptions ? searchOptions.data_full : [];
                    var surface = "surface" in searchDataFull ? searchDataFull.surface : "";
                    var surface_min = 0;
                    var surface_max = 0;
                    if (surface) {
                        var s = surface.split('_');
                        surface_min = s[0];
                        surface_max = s[1];
                    }

                    Graphics.filter((e) => {
                        var {G: v, Graph: obj} = e;
                        obj.alpha = v.opacity;
                        if(!search){
                            return false;
                        }
                        obj.alpha = 0;
                        var category = (v.hasOwnProperty('projet_property_type')) ? ((v.projet_property_type) ? ((v.projet_property_type.hasOwnProperty('name')) ? v.projet_property_type.name : '') : '') : '';
                        if ((v.jumelee == searchDataFull.type_villa || !searchDataFull.type_villa)
                            && (v.total_pieces == searchDataFull.pieces || !searchDataFull.pieces)
                            && ((v.surface_terrain >= surface_min && v.surface_terrain <= surface_max) || !surface)
                            && ((category && category == searchDataFull.category) || !searchDataFull.category)
                            && (v.name == searchDataFull.reference || !searchDataFull.reference)
                        ) {
                            obj.alpha = 1;
                        }
                    })*/
                    console.dir(Graphics);
                },
            };
            loadPlan(data);
        })
        function loadFloor(floor){
            if(floor in floors){
                var dataFloor = floors[floor];
                loadPlan(dataFloor);
            }
        }
        function loadPlan(data) {
            if (app) {
                //app.destroy(true, {children: true, texture: true, baseTexture: true});
            }
            $("#container_map").html("");

            app = new Map.Zoomer(window.innerWidth, window.innerHeight, { transparent: true, autoResize: true });
            app.init(data, function () {
                // console.log("loaded");
                $("#container_map canvas").addClass('row');
                $("#container_map canvas").attr('id', 'canvas-container');
                $("#container_map canvas").css('margin', '0');
                $("#container_map canvas").attr('title', ' ');
                $("#container_map canvas").tooltip({
                    track: true,
                    context: function () {
                        return ' ';
                    },
                });
                $('.ui-tooltip').hide();
            });

            //app.search(true, {});
        }

    </script>
<script type="text/javascript" src="bundle.min.js"></script></body>

</html>